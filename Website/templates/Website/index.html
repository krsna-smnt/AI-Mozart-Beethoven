{% extends 'Website/base.html' %}
{% load staticfiles %}

{% block title %}
	<title>Music</title>
{% endblock %}

{% block content %}

<div class="container">
	<div class='row'>
		<div class='col-lg-6'>
			<div class="panel panel-default">
				<div class='panel-heading'>
					<h3>Upload a file</h3>
				</div>

				<div class="panel-body">
					<form method="post" action="{% url 'index' %}" name='musicform' enctype="multipart/form-data">
					{% csrf_token %}
						<p>{{ form.non_field_errors }}</p>
		        	    
		        	    <p>
    		        	    {{ form.audio.errors }}
    		        	    {{ form.audio.label_tag }}
        		        	{{ form.audio }}
            			</p>

					<button type="submit" value='Upload' class="btn btn-primary btn-block">Add Music</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

{% for song in audios %}
<div class="container">
	<div class="row">
		<h3><span id="MIDIjs.message" style="color: green">Initializing ...</span></h3>
	</div>
</div>
<br>
<div class="container">
	<div class="ui labeled icon buttons">
	  <button class="ui button" onClick="MIDIjs.play('{{ song.audio.url }}');">
	    <i class="play icon"></i>
	    Play
	  </button>
	  <button class="ui button" onClick="MIDIjs.stop();">
	    <i class="stop icon"></i>
	    Stop
	  </button>
	</div>
</div>

{% endfor %}

	<script type='text/javascript' src='http://www.midijs.net/lib/midi.js'></script>
	<script type='text/javascript' src="{% static 'js/scripts.js' %}"></script>
{% endblock %}